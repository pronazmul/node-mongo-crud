<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Frontend</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
</head>

<body>

    <div class="jumbotron text-center">
        <h1 class="font-width-bold">Mongo Db Connectd Frontend</h1>
    </div>

    <div class="row col-md-8 mx-auto">
        <form action="/insertData" method="POST" class="w-100">
            <div class="form-group">
                <label>Enter Username</label>
                <input type="text" name="userName" class="form-control" placeholder="User name">
            </div>
            <div class="form-group">
                <label>Enter Email</label>
                <input type="email" name="userEmail" class="form-control" placeholder="Email">
            </div>
            <div class="form-group">
                <label>Enter Phone</label>
                <input type="number" name="userPhone" class="form-control" placeholder="Phone">
            </div>
            <div class="form-group">
                <label>Enter Address</label>
                <input type="text" name="userAddress" class="form-control" placeholder="Email">
            </div>
            <input type="submit" class="btn btn-success" value="Submit Data"/>
        </form>
        <div class="row">
            <div class="card">
                <div class="card-body">
                    <div id="text"></div>
                </div>
            </div>
        </div>
    </div>
<script>
    
    const deleteUser = id => {
        fetch(`/delete/${id}`,{method:'DELETE'})
        .then(res=> res.json())
        .then(data => console.log("Delete Success"))
    }

        fetch('/read')
        .then(res=> res.json())
        .then(data=>{
            data.forEach(user => {
                const item = document.createElement('p')
                item.innerHTML =`<strong>Name:</strong> ${user.userName} 
                                <strong>Email:</strong> ${user.userEmail} 
                                <button onclick='deleteUser("${user._id}")'class='btn btn-danger'>Delete</button>`
                document.getElementById('text').appendChild(item)
            })
        })

</script>

</body>

</html>